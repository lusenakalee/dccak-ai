// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id        String     @id @map("_id")  // This should match Clerk's userId
  email     String     @unique
  name      String?
  
  // Onboarding fields
  title     String?    // Professional title
  niche     String?    // User's niche/category
  phone     String?    // Phone number
  
  // Social media links
  youtube   String?
  tiktok    String?
  instagram String?
  facebook  String?
  twitter   String?
  
  // Onboarding completion tracking
  onboardingCompleted Boolean  @default(false)
  
  campaigns Campaign[]
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
}

enum CampaignNiche {
  TECHNOLOGY
  BEAUTY
  GAMING
  LIFESTYLE
  FASHION
  FOOD
  FITNESS
  TRAVEL
  EDUCATION
  ENTERTAINMENT
}

enum CampaignType {
  BRAND_CAMPAIGN
  GRANT
  EVENT
}

enum CampaignStatus {
  DRAFT
  ACTIVE
  PLANNING
  COMPLETED
  CANCELLED
}

model Campaign {
  id                String         @id @default(auto()) @map("_id") @db.ObjectId
  campaignName      String
  campaignTag       CampaignNiche
  dueDate           DateTime
  budget            Float
  campaignType      CampaignType
  creatorsNeeded    Int
  status            CampaignStatus @default(DRAFT)
  
  // Relation to User
  userId            String
  user              User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  // Additional useful fields
  description       String?
  startDate         DateTime?
  impressions       Int            @default(0)
  engagement        Float          @default(0)
  progress          Int            @default(0)
  
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt
  
  @@index([userId])
  @@index([status])
  @@index([campaignTag])
}